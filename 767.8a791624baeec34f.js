"use strict";(self.webpackChunkseller=self.webpackChunkseller||[]).push([[767],{6767:(V,h,p)=>{p.r(h),p.d(h,{VerifyOtpComponent:()=>T});var c=p(6895),e=p(4650),l=p(4006);function y(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"input",3,4),e.NdJ("paste",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.handlePaste(o))})("keyup",function(o){const a=e.CHM(t).index,f=e.oxw(2);return e.KtG(f.onKeyUp(o,a))})("input",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onInput(o))})("keydown",function(o){const a=e.CHM(t).index,f=e.oxw(2);return e.KtG(f.onKeyDown(o,a))}),e.qZA()}if(2&i){const t=r.$implicit,n=r.index,o=e.oxw(2);e.Gre("otp-input ",o.config.inputClass,""),e.Q6J("pattern",o.config.allowNumbersOnly?"\\d*":"")("type",o.inputType)("placeholder",(null==o.config?null:o.config.placeholder)||"")("ngStyle",o.config.inputStyles)("formControl",o.otpForm.controls[t])("id",o.getBoxId(n))}}function _(i,r){if(1&i&&(e.TgZ(0,"div",1),e.YNc(1,y,2,9,"input",2),e.ALo(2,"keys"),e.qZA()),2&i){const t=e.oxw();e.Gre("ng-otp-input-wrapper wrapper ",t.config.containerClass,""),e.MGl("id","c_",t.componentKey,""),e.Q6J("ngStyle",t.config.containerStyles),e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,6,null==t.otpForm?null:t.otpForm.controls))}}class u{static ifTab(r){return this.ifKey(r,"Tab")}static ifDelete(r){return this.ifKey(r,"Delete;Del")}static ifBackspace(r){return this.ifKey(r,"Backspace")}static ifRightArrow(r){return this.ifKey(r,"ArrowRight;Right")}static ifLeftArrow(r){return this.ifKey(r,"ArrowLeft;Left")}static ifSpacebar(r){return this.ifKey(r,"Spacebar; ")}static ifKey(r,t){return t.split(";").some(o=>o===r.key)}}let d=(()=>{class i{transform(t){return Object.keys(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"keys",type:i,pure:!0}),i})(),C=(()=>{class i{constructor(t){this.keysPipe=t,this.config={length:4},this.onInputChange=new e.vpe,this.inputControls=new Array(this.config.length),this.componentKey=Math.random().toString(36).substring(2)+(new Date).getTime().toString(36)}get inputType(){return this.config?.isPasswordInput?"password":this.config?.allowNumbersOnly?"tel":"text"}ngOnInit(){this.otpForm=new l.cw({});for(let t=0;t<this.config.length;t++)this.otpForm.addControl(this.getControlName(t),new l.NI);this.otpForm.valueChanges.subscribe(t=>{this.keysPipe.transform(this.otpForm.controls).forEach(n=>{var o=this.otpForm.controls[n].value;o&&o.length>1&&(o.length>=this.config.length?this.setValue(o):this.rebuildValue())})})}ngAfterViewInit(){if(!this.config.disableAutoFocus){const t=document.getElementById(`c_${this.componentKey}`);if(t){const n=t.getElementsByClassName("otp-input")[0];n&&n.focus&&n.focus()}}}getControlName(t){return`ctrl_${t}`}onKeyDown(t,n){const o=this.getBoxId(n-1),s=this.getBoxId(n);return u.ifSpacebar(t)?(t.preventDefault(),!1):u.ifBackspace(t)?(t.target.value?this.clearInput(s,n):(this.clearInput(o,n-1),this.setSelected(o)),void this.rebuildValue()):void 0}onInput(t){if(this.config.allowNumbersOnly&&!this.validateNumber(this.currentVal?`${this.currentVal}${t.target.value}`:t.target.value))return t.target.value="",t.stopPropagation(),void t.preventDefault()}onKeyUp(t,n){u.ifTab(t)&&(n-=1);const o=this.getBoxId(n+1),s=this.getBoxId(n-1),a=this.getBoxId(n);return u.ifRightArrow(t)?(t.preventDefault(),void this.setSelected(o)):u.ifLeftArrow(t)?(t.preventDefault(),void this.setSelected(s)):u.ifDelete(t)?(t.target.value?this.clearInput(a,n):(this.clearInput(s,n-1),this.setSelected(s)),void this.rebuildValue()):void(t.target.value&&(this.ifValidKeyCode(t)&&this.setSelected(o),this.rebuildValue()))}validateNumber(t){return t&&/^\d*\.?\d*$/.test(t)}getBoxId(t){return`otp_${t}_${this.componentKey}`}clearInput(t,n){let o=this.getControlName(n);this.otpForm.controls[o]?.setValue(null);const s=document.getElementById(t);s&&s instanceof HTMLInputElement&&(s.value=null)}setSelected(t){this.focusTo(t);const n=document.getElementById(t);n&&n.setSelectionRange&&setTimeout(()=>{n.setSelectionRange(0,1)},0)}ifValidKeyCode(t){const n=t.key;return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)||/[a-zA-Z0-9-_]/.test(n)}focusTo(t){const n=document.getElementById(t);n&&n.focus()}setValue(t){if(!this.config.allowNumbersOnly||!isNaN(t)){if(this.otpForm.reset(),!t)return void this.rebuildValue();if(t=t.toString().replace(/\s/g,""),Array.from(t).forEach((o,s)=>{this.otpForm.get(this.getControlName(s))&&this.otpForm.get(this.getControlName(s)).setValue(o)}),!this.config.disableAutoFocus){const o=document.getElementById(`c_${this.componentKey}`);var n=t.length<this.config.length?t.length:this.config.length-1;let s=o.getElementsByClassName("otp-input")[n];s&&s.focus&&s.focus()}this.rebuildValue()}}rebuildValue(){let t="";this.keysPipe.transform(this.otpForm.controls).forEach(n=>{if(this.otpForm.controls[n].value){let o=this.otpForm.controls[n].value,s=o.length>1,a=!this.config.allowNumbersOnly&&this.config.letterCase&&("upper"==this.config.letterCase.toLocaleLowerCase()||"lower"==this.config.letterCase.toLocaleLowerCase());o=o[0];let f=a?"upper"==this.config.letterCase.toLocaleLowerCase()?o.toUpperCase():o.toLowerCase():o;a&&f==o?a=!1:o=f,t+=o,(s||a)&&this.otpForm.controls[n].setValue(o)}}),this.formCtrl?.setValue&&this.formCtrl.setValue(t),this.onInputChange.emit(t),this.currentVal=t}handlePaste(t){let n=t.clipboardData||window.clipboardData;if(n)var o=n.getData("Text");t.stopPropagation(),t.preventDefault(),o&&(!this.config.allowNumbersOnly||this.validateNumber(o))&&this.setValue(o)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-otp-input"]],inputs:{config:"config",formCtrl:"formCtrl"},outputs:{onInputChange:"onInputChange"},decls:1,vars:1,consts:[[3,"class","id","ngStyle",4,"ngIf"],[3,"id","ngStyle"],["autocomplete","one-time-code",3,"pattern","type","placeholder","ngStyle","class","formControl","id","paste","keyup","input","keydown",4,"ngFor","ngForOf"],["autocomplete","one-time-code",3,"pattern","type","placeholder","ngStyle","formControl","id","paste","keyup","input","keydown"],["inp",""]],template:function(t,n){1&t&&e.YNc(0,_,3,8,"div",0),2&t&&e.Q6J("ngIf",null==n.otpForm?null:n.otpForm.controls)},dependencies:[c.O5,c.PC,c.sg,l.Fj,l.c5,l.JJ,l.oH,d],styles:[".otp-input[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:4px;border:solid 1px #c5c5c5;text-align:center;font-size:32px}.ng-otp-input-wrapper[_ngcontent-%COMP%]   .otp-input[_ngcontent-%COMP%]:not(:last-child){margin-right:8px}@media screen and (max-width: 767px){.otp-input[_ngcontent-%COMP%]{width:40px;font-size:24px;height:40px}}@media screen and (max-width: 420px){.otp-input[_ngcontent-%COMP%]{width:30px;font-size:18px;height:30px}}"]}),i})(),b=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[d],imports:[[c.ez,l.u5,l.UX]]}),i})();var m=p(9151),g=p(1310),x=p(727),I=p(793);function w(i,r){1&i&&(e.TgZ(0,"small",7),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"seller.auth.Password_is_Required")," "))}function O(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"seller.auth.Submit")," "))}function v(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"seller.auth.Waiting"),"... "))}const N=function(){return{length:4}};let T=(()=>{class i{constructor(t,n,o,s){this._Router=t,this._AuthServiceService=n,this._FormBuilder=o,this._ActivatedRoute=s,this.loadingIndicator=!1,this.subscription=new x.w0,this.getParams()}ngOnInit(){}submit(){this.subscription.add(this._AuthServiceService.verifyOtp({otp_code:this.otpCode,email:this.email}).subscribe(t=>{this._Router.navigate(["/storePassword"],{queryParams:{otp_code:this.otpCode,email:this.email}})}))}getParams(){this._ActivatedRoute.queryParams.subscribe(t=>{this.email=t.email})}resendCode(){this.subscription.add(this._AuthServiceService.sendOtp({email:this.email}).subscribe())}onOtpChange(t){this.otpCode=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.F0),e.Y36(I.e),e.Y36(l.qu),e.Y36(g.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-verify-otp"]],standalone:!0,features:[e.jDz],decls:11,vars:9,consts:[[1,"form-group","my-3","text-center"],[3,"config","keyup.enter","onInputChange"],["class","text-danger",4,"ngIf"],[1,"d-flex","justify-content-end","mb-2"],[1,"text-decoration-underline",2,"color","#627084",3,"click"],["type","button",1,"submit-btn",3,"disabled","click"],[4,"ngIf"],[1,"text-danger"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"ng-otp-input",1),e.NdJ("keyup.enter",function(){return n.submit()})("onInputChange",function(s){return n.onOtpChange(s)}),e.qZA(),e.YNc(2,w,3,3,"small",2),e.qZA(),e.TgZ(3,"div",3)(4,"a",4),e.NdJ("click",function(){return n.resendCode()}),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"div")(8,"button",5),e.NdJ("click",function(){return n.submit()}),e.YNc(9,O,3,3,"span",6),e.YNc(10,v,3,3,"span",6),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("config",e.DdM(8,N)),e.xp6(1),e.Q6J("ngIf",n.submitted),e.xp6(3),e.hij("",e.lcZ(6,6,"seller.auth.resend_code")," ?"),e.xp6(3),e.Q6J("disabled",n.loadingIndicator),e.xp6(1),e.Q6J("ngIf",!n.loadingIndicator),e.xp6(1),e.Q6J("ngIf",n.loadingIndicator))},dependencies:[c.ez,c.O5,b,C,m.aw,m.X$,l.UX,l.u5,g.Bz],styles:[".my-btn[_ngcontent-%COMP%]{font-size:14px;font-weight:400;padding:5px 10px}.my-btn[_ngcontent-%COMP%]:lang(ar){flex-direction:row-reverse}.my-btn-dark-blue[_ngcontent-%COMP%]{background-color:#0f183d;color:#fff}.my-btn-grey[_ngcontent-%COMP%]{background-color:#f2f2f2;color:#0e1740}.view-list[_ngcontent-%COMP%]{border-radius:40px}.bg-sales-report[_ngcontent-%COMP%]{background-color:#e5f6f4}.submit-btn[_ngcontent-%COMP%]{background-color:transparent;border:solid 1px #e85c72;color:#e85c72;width:100%;padding:10px;font-size:14px;font-weight:600;transition:all .2s ease-in-out;border-radius:3px;letter-spacing:1px}.submit-btn[_ngcontent-%COMP%]:hover{color:#fff;background-color:#e85c72}input[_ngcontent-%COMP%]{margin:0 10px!important}"]}),i})()}}]);